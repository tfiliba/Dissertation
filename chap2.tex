\chapter{Real Time Radio Astronomy Instrumentation}
%Summary: Give an description of radio astronomy instrumentation \\
%Describe science goals and mathematical function \\
%Goal: Give background for the application. Show that most instruments use a small number of high level functions\\
%State: Can be written now \\
%Use info from casper papers and radio 101 \\
%References already compiled \\

Radio telescopes produce very high amounts of data. 
The reason for this high influx of data is twofold. 
First, to enable new science, new radio antenna observe increasingly higher bandwidths of data. 
Second, to sate the need for larger collecting area, rather than designing a large single dish, many new telescopes are being designed as antenna arrays, where the data from multiple antennas is combined to act as a single large dish.
As the size of the arrays and bandwidths for single dishes simultaneously increase, the data produced cannot be feasibly recorded in real-time. 
To cope with the progress science and antenna technology, there is a constant need for new systems to process, rather than record, this data in real time.
Once the data is partially processed, and reduced to a manageable bandwidth, it can be stored and processed further offline, where there is no longer a need for low-latency, high-bandwidth hardware.


\section{Real Time Algorithms}
%TODO add complexity analysis
There is a small number of real time algorithms commonly used to reduce the data, in this section we focus on spectroscopy, pulsar processing, beamforming and interferometry. 


\subsection{Spectroscopy}
A spectrometer is simply an instrument that produces an integrated spectrum from a time domain signal. 
After digitizing the data, a spectrum is constantly computed (channelization), then each channel is summed for a predetermined amount of time to compute the average power in that channel. 
Figure (TODO: add spectrometer block diagram) shows a block diagram for a simple spectrometer design. 
After digitization, there is the channelization step, where the signal is processed by a digital filter bank, and then the channels are accumulated. 

High-resolution, high-bandwidth spectrometers often require more complexity in their design. 
Once the number of channels is sufficiently high, it becomes infeasible to compute the spectrum using a single filter bank. 
To cope with this, the channelization is done in two steps as shown in figure (TODO: add hi res spectrometer block diagram). 
In the first step, the signal is divided into coarse channels using a filter bank. 
At this point the channels are much wider than intended and can't be accumulated yet. 
After coarse channelization, the spectrometer treats the data from a single channel as time domain data and passes it through a filter bank again. 
This step breaks up the wide channel into a number of smaller channels . At this point the data can be accumulated since it has the desired resolution.

\subsection{Pulsar Processing}
A pulsar processor is an instrument designed specifically to observe transient events, such as pulsars. 
A pulsar is a rotating neutron star that emits a beam. 
When the beam sweeps past Earth, due to the rotation of the star, it is observed as a wideband pulse. 
As the pulse travels through the interstellar medium (the matter filling interstellar space), the pulsar gets dispersed, meaning the low frequencies arrive before high frequencies, despite the fact that they were emitted at the same time. 

A normal spectrometer that accumulates the spectrum would smear the pulse, so there will need to be a few adjustments to the spectroscopy algorithm to make it suitable for processing transient events. 
In the case of pulsars, the algorithm starts with a high-resolution spectrometer minus the accumulator. 
Instead, the algorithm becomes specialized to detect this type of quickly occurring event.

The high resolution data is then sent to a process called dedispersion, which undoes the dispersion caused by the ISM, realigning the pulse.
%TODO: describe dm, pulsar searching
There are 2 techniques to do this.
First, the pulse can be dedispersed by shifting the frequency channels by different amounts to compensate for the different delays as shown in figure TODO: add figure, in a process called \emph{incoherent dedispersion}.
This process can't be used to reconstruct the original pulse, but due to its relatively low compute cost, is a useful algorithm to search for new pulsars.
The second technique, \emph{coherent dedispersion}, models the effect of the ISM as a convolving filter. 
To remove this effect, the signal is deconvolved with the model.
This is more compute intensive than incoherent dedispersion, but can recover the original pulse.

After dedispersion, there is a still a lot of data and the pulse has very low SNR. 
The next step in processing is \emph{folding}, or adds together many pulses, reducing the signal and improving the SNR.
At this point, the data has been significantly reduced and can be recorded. 

%TODO: Graphic to describe this process. Block diagram + images

%Detect dispersed pulses
%
\subsection{Beamforming}
Beamforming is one technique for combining data from an array of antennas.
The beamformer combines the data from multiple antennas into a single beam pointed at a single point in the sky.
This is done by 
%TODO: Add 2 element beamformer
%%Add together multiple (delayed) signals to improve SNR

\subsection{Correlation}
Interferometery is another technique to combine the data from array of antennas.
Unlike beamforming, rather than forming a single beam, an interferometer uses the data from the antennas to form a sky image. 
In order to form a the sky image, the instrument must calculate the cross-correlation of each pair of antennas.

A spectral correlator

%%Form an image
%An interferometer 

\section{Science Goals}
Radio astronomy simply refers to the type of science that can be done by observing astronomical objects at radio wavelengths, rather than a specific scientific goal. 
There is a huge variety of different experiments, such as searching for gravity waves (TODO: ref nangrav), traces of the first stars (TODO: ref PAPER), or aliens (TODO: ref SETI).
But, despite this variety, the small number of algorithms detailed above serve as the first step in processing the data for many such projects.

SETI, or the Search for Extra Terrestrial Intelligence, 

